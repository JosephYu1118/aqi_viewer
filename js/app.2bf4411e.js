(function(t){function e(e){for(var a,r,s=e[0],c=e[1],u=e[2],f=0,v=[];f<s.length;f++)r=s[f],i[r]&&v.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(v.length)v.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},o=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0cfb":function(t,e,n){},"0ec3":function(t,e,n){},1692:function(t,e,n){"use strict";(function(t){e["a"]={props:["p_aqi"],data:function(){return{}},methods:{getBackground:function(t){return{status_aqi_01:t>=0&&t<=50,status_aqi_02:t>=51&&t<=100,status_aqi_03:t>=101&&t<=150,status_aqi_04:t>=151&&t<=200,status_aqi_05:t>=201&&t<=300,status_aqi_06:t>=301&&t<=500}},getValue:function(t){var e=100,n=Math.PI*(2*e);return Math.abs(e-t)/e*n},getColor:function(t){return t>=0&&t<=200?"#1f3c88":"#ffb228"},getDetail:function(t){return{"PM2.5 移動平均":t["PM2.5_AVG"],"PM2.5 小時濃度":t["PM2.5"],"PM10 移動平均":t["PM10_AVG"],"PM10 小時濃度":t["PM10"]}},turnOver:function(e){t(e.target).css({transform:"rotateY(180deg)"}),setTimeout(function(){t(e.target).css({transform:"rotateY(0deg)"})},1500)},setFavouriteAqi:function(t){t.isFavourite=!t.isFavourite,this.$store.commit("getFavouriteAqi",t)}}}}).call(this,n("1157"))},3654:function(t,e,n){"use strict";var a=n("e9c7"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],r=(n("cf25"),n("2877")),s={},c=Object(r["a"])(s,i,o,!1,null,null,null),u=c.exports,l=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"home"}},[n("div",{staticClass:"aqi_viewer"},[n("h2",[t._v("空氣品質監測站")]),n("SelectBox"),n("div",{staticClass:"background_box"},[n("h4",[t._v("關注測站點")]),n("AqiBox",{attrs:{p_aqi:t.favouriteAqi}})],1),n("AqiBox",{attrs:{p_aqi:t.chosenAqi}})],1)])},v=[],d=n("cebc"),p=n("2f62"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"select_box"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.chosenCounty,expression:"chosenCounty"}],staticClass:"form-control",attrs:{name:"option"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.chosenCounty=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--- 請選擇縣市 ---")]),t._l(t.getCounty,function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e))])})],2),n("select",{directives:[{name:"model",rawName:"v-model",value:t.chosenSite,expression:"chosenSite"}],staticClass:"form-control",attrs:{name:"option"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.chosenSite=e.target.multiple?n:n[0]}}},[t.chosenSite?t._e():n("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--- 請選擇測站 ---")]),t._l(t.getSite,function(e){return t.chosenCounty?n("option",{domProps:{value:e}},[t._v(t._s(e))]):t._e()})],2)])},_=[],m={data:function(){return{chosenCounty:"",chosenSite:""}},methods:{setChosenAqi:function(t,e){this.$store.commit("getChosenAqi",{county:t,site:e})}},computed:Object(d["a"])({},Object(p["c"])(["aqiData"]),{getCounty:function(){var t=this.aqiData.map(function(t){return t.County});return t.filter(function(t,e,n){return n.indexOf(t)===e})},getSite:function(){var t=this,e=this.aqiData.filter(function(e){return e.County===t.chosenCounty});return e.map(function(t){return t.SiteName})}}),watch:{chosenCounty:function(){this.chosenSite="",this.setChosenAqi(this.chosenCounty)},chosenSite:function(){this.setChosenAqi(this.chosenCounty,this.chosenSite)}}},q=m,g=(n("c03d"),Object(r["a"])(q,h,_,!1,null,null,null)),b=g.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"aqi_box"}},t._l(t.p_aqi,function(e){return n("div",{key:e.favouriteIndex,staticClass:"aqi_card",on:{click:function(e){return e.target!==e.currentTarget?null:t.turnOver(e)}}},[n("div",{staticClass:"face back",class:t.getBackground(e.AQI)},[n("table",{staticClass:"table table-striped"},[n("tbody",t._l(t.getDetail(e),function(e,a){return n("tr",[n("th",{attrs:{scope:"row"}},[t._v(t._s(a))]),n("td",[t._v(t._s(e))])])}),0)])]),n("div",{staticClass:"face front",class:t.getBackground(e.AQI)},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isFavourite,expression:"aqi.isFavourite"}],staticClass:"btn_favourite",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isFavourite)?t._i(e.isFavourite,null)>-1:e.isFavourite},on:{click:function(n){return t.setFavouriteAqi(e)},change:function(n){var a=e.isFavourite,i=n.target,o=!!i.checked;if(Array.isArray(a)){var r=null,s=t._i(a,r);i.checked?s<0&&t.$set(e,"isFavourite",a.concat([r])):s>-1&&t.$set(e,"isFavourite",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(e,"isFavourite",o)}}}),n("i",{staticClass:"fas fa-star",class:{added:e.isFavourite}})]),n("div",{staticClass:"aqi_title"},[t._v(t._s(e.County)+" "+t._s(e.SiteName))]),n("div",{staticClass:"aqi_tag"},[t._v("AQI")]),n("div",{staticClass:"aqi_value",style:{color:t.getColor(e.AQI)}},[t._v(t._s(e.AQI))]),n("div",{staticClass:"aqi_description"},[t._v(t._s(e.Status))]),n("div",{staticClass:"aqi_time"},[t._v(t._s(e.PublishTime))]),n("svg",{attrs:{viewBox:"-10 -10 220 220"}},[n("circle",{staticClass:"base",attrs:{cx:"100",cy:"100",r:"100"}}),n("circle",{staticClass:"progress",style:{"stroke-dashoffset":t.getValue(e.AQI),stroke:t.getColor(e.AQI)},attrs:{cx:"100",cy:"100",r:"100"}})])])])}),0)},A=[],C=n("1692"),x=C["a"],S=(n("a73d"),Object(r["a"])(x,y,A,!1,null,null,null)),O=S.exports,w={components:{SelectBox:b,AqiBox:O},methods:Object(d["a"])({},Object(p["b"])(["loadAqiData"])),computed:Object(d["a"])({},Object(p["c"])(["aqiData","chosenAqi","favouriteAqi"])),created:function(){this.loadAqiData()}},j=w,P=(n("3654"),Object(r["a"])(j,f,v,!1,null,null,null)),k=P.exports;a["a"].use(l["a"]);var D=new l["a"]({routes:[{path:"/",name:"Home",component:k}]}),F=(n("7514"),n("6762"),n("2fdb"),n("ac6a"),n("bc3a")),M=n.n(F);a["a"].use(p["a"]);var I=new p["a"].Store({state:{aqiData:[],chosenAqi:[],favouriteAqi:[],counter:0},mutations:{getAqiData:function(t,e){t.aqiData=e,t.aqiData.forEach(function(t){a["a"].set(t,"isFavourite",!1)})},getChosenAqi:function(t,e){e.site?t.chosenAqi=t.aqiData.filter(function(t){return t.County===e.county&&t.SiteName===e.site}):t.chosenAqi=t.aqiData.filter(function(t){return t.County===e.county})},getFavouriteAqi:function(t,e){if(t.favouriteAqi.includes(e))t.favouriteAqi=t.favouriteAqi.filter(function(t){return t.SiteName!==e.SiteName});else{t.favouriteAqi.push(e);var n=t.aqiData.find(function(t){return t.SiteName===e.SiteName});n.favouriteIndex=t.counter++}}},actions:{loadAqiData:function(t){var e="".concat("http://opendata2.epa.gov.tw/AQI.json");M.a.get(e).then(function(e){t.commit("getAqiData",e.data)})}}});a["a"].config.productionTip=!1,new a["a"]({router:D,store:I,render:function(t){return t(u)}}).$mount("#app")},"5c42":function(t,e,n){},a73d:function(t,e,n){"use strict";var a=n("0ec3"),i=n.n(a);i.a},c03d:function(t,e,n){"use strict";var a=n("5c42"),i=n.n(a);i.a},cf25:function(t,e,n){"use strict";var a=n("0cfb"),i=n.n(a);i.a},e9c7:function(t,e,n){}});
//# sourceMappingURL=app.2bf4411e.js.map